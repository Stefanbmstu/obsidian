В Go горутина — легковесный поток, контекст исполнения, который имеет свой стек и набор регистров, но планирование происходит не на уровне  ОС, а внутри самого рантайма Go. Копирования стека не будет.

Поток ОС - контекст исполнения, подразумевается только стеком и набором регистров.

Преимущество.
То есть ядро про горутины вообще не знает — ими управляет пользовательский планировщик Go. Достаточно изменить регистры, стек не нужно копировать

В потоках ОС переключение контекста управляется ядром.
Чтобы выбрать следующий поток, нужно:
1. Переключиться в **режим ядра**.
2. Планировщик ОС решает, какой поток запустить.
3. Затем происходит **второе переключение** обратно в пользовательский режим.
Это требует системных вызовов и дорого по времени.
 
**Когда переключение происходит, куда сохраняются регистры?**
На стек легковесного потока

**Стек** не фиксированный, он растёт динамически — примерно как слайс, макс зависит от архитектуры - 64бит - 1гб, 32бит - 250мб

**Контекст**
Набор мета-данных, ассоциированных с каким-либо запросом или процессом 
![[Pasted image 20251005142037.png]] 