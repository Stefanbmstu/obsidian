В случае необходимости запрашивает у операционной системы память большими кусками (аренами), их размер арен может отличаться (linux - 64mb). Из страниц арены (по 8kb) Go выстраивает иерархическую модель хранения данных, образуя при этом спаны разного размера.
**Выделение памяти**
![[Pasted image 20251004100531.png]]**Предсказуемая фрагментация памяти**
Мы не можем аллоцировать какую-то память с ходу, поскольку она может быть фрагментирована. Спаны используются в классах объектов (размеров) :![[Pasted image 20251004100946.png]]
 Некоторые аллокаторы устроены так, что они рядом складывают и маленькие, и крупные объекты, потом крупный объект освобождается, там появляется куча маленьких, и там уже невозможно проаллоцировать большой объект. В Go каждый объект разделен на разные классы, мы потребляем доп память, которая никак не используется, но благодаря этому у нас есть предсказуемая фрагментация 